{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"OpenShift Install","text":""},{"location":"#dns","title":"DNS","text":""},{"location":"#install-clis","title":"Install CLIs","text":"<pre><code>mkdir -p ~/bin\nmkdir -p /tmp/ocp\ncurl -o /tmp/ocp/openshift-client-linux.tar.gz https://mirror.openshift.com/pub/openshift-v4/x86_64/clients/ocp/stable/openshift-client-linux.tar.gz\ntar -xvf /tmp/ocp/openshift-client-linux.tar.gz -C ~/bin\n\ncurl -o /tmp/ocp/openshift-install-linux.tar.gz https://mirror.openshift.com/pub/openshift-v4/x86_64/clients/ocp/stable/openshift-install-linux.tar.gz\ntar -xvf /tmp/ocp/openshift-install-linux.tar.gz -C ~/bin\n\nsudo dnf install /usr/bin/nmstatectl -y\n</code></pre>"},{"location":"#cluster-install-command-reference","title":"Cluster Install Command Reference","text":""},{"location":"#create-iso","title":"Create ISO","text":"<pre><code>rm -rf install\nmkdir install\ncp agent-config.yaml install-config.yaml install\nopenshift-install agent create image --dir=install --log-level=debug\n</code></pre>"},{"location":"#wait-for-bootstrap","title":"Wait for Bootstrap","text":"<pre><code>openshift-install agent wait-for bootstrap-complete --dir=install --log-level=debug\n</code></pre>"},{"location":"#wait-for-install-to-complete","title":"Wait for Install to Complete","text":"<pre><code>openshift-install agent wait-for install-complete --dir=install --log-level=debug\n</code></pre>"},{"location":"install-simple/","title":"OpenShift Install Configurations","text":""},{"location":"install-simple/#simple-3-node-install-with-basic-networking","title":"Simple 3 Node Install with basic networking","text":"install-config.yaml<pre><code>apiVersion: v1\nbaseDomain: ocp.example.com \nmetadata:\n  name: dev\ncompute:\n- architecture: amd64\n  hyperthreading: Enabled\n  name: worker\n  replicas: 0\ncontrolPlane:\n  architecture: amd64\n  hyperthreading: Enabled\n  name: master\n  replicas: 3\nnetworking:\n  clusterNetwork:\n  - cidr: 10.128.0.0/14\n    hostPrefix: 23\n  machineNetwork:\n  - cidr: 10.1.0.0/24\n  networkType: OVNKubernetes\n  serviceNetwork:\n  - 172.30.0.0/16\nplatform:\n  baremetal:\n    apiVIP: 10.1.0.9\n    ingressVIP: 10.1.0.10\npullSecret: '&lt;redacted&gt;'\nsshKey: '&lt;redacted&gt;'\n</code></pre> agent-config.yaml<pre><code>apiVersion: v1alpha1\nkind: AgentConfig\nmetadata:\n  name: dev\nrendezvousIP: 10.1.0.11\nhosts:\n  - hostname: control-plane-01\n    role: master\n    interfaces:\n      - name: eno1\n        macAddress: 06:00:00:00:00:01\n    rootDeviceHints:\n      deviceName: \"/dev/sda\"\n    networkConfig:\n      interfaces:\n        - name: eno1\n          type: ethernet\n          state: up\n          mac-address: 06:00:00:00:00:01\n          ipv4:\n            enabled: true\n            address:\n              - ip: 10.1.0.11\n                prefix-length: 24\n            dhcp: false\n      dns-resolver:\n        config:\n          server:\n            - 10.1.0.2\n      routes:\n        config:\n          - destination: 0.0.0.0/0\n            next-hop-address: 10.1.0.1\n            next-hop-interface: eno1\n            table-id: 254\n  - hostname: control-plane-02\n    role: master\n    interfaces:\n      - name: eno1\n        macAddress: 06:00:00:00:00:02\n    rootDeviceHints:\n      deviceName: \"/dev/sda\"\n    networkConfig:\n      interfaces:\n        - name: eno1\n          type: ethernet\n          state: up\n          mac-address: 06:00:00:00:00:02\n          ipv4:\n            enabled: true\n            address:\n              - ip: 10.1.0.12\n                prefix-length: 24\n            dhcp: false\n      dns-resolver:\n        config:\n          server:\n            - 10.1.0.2\n      routes:\n        config:\n          - destination: 0.0.0.0/0\n            next-hop-address: 10.1.0.1\n            next-hop-interface: eno1\n            table-id: 254\n  - hostname: control-plane-03\n    role: master\n    interfaces:\n      - name: eno1\n        macAddress: 06:00:00:00:00:03\n    rootDeviceHints:\n      deviceName: \"/dev/sda\"\n    networkConfig:\n      interfaces:\n        - name: eno1\n          type: ethernet\n          state: up\n          mac-address: 06:00:00:00:00:03\n          ipv4:\n            enabled: true\n            address:\n              - ip: 10.1.0.13\n                prefix-length: 24\n            dhcp: false\n      dns-resolver:\n        config:\n          server:\n            - 10.1.0.2\n      routes:\n        config:\n          - destination: 0.0.0.0/0\n            next-hop-address: 10.1.0.1\n            next-hop-interface: eno1\n            table-id: 254\n</code></pre>"},{"location":"install-simple/#openshift-agentconfig-with-lacp-bond-interface-configuration","title":"OpenShift AgentConfig with LACP Bond Interface Configuration","text":"agent-config.yaml<pre><code>apiVersion: v1alpha1\nkind: AgentConfig\nmetadata:\n  name: ocp\nrendezvousIP: 10.1.0.11\nhosts:\n  - hostname: control-plane-01\n    role: master\n    interfaces:\n      - name: eno1\n        macAddress: 06:00:00:00:00:11\n      - name: eno2\n        macAddress: 06:00:00:00:00:12\n    rootDeviceHints:\n      deviceName: \"/dev/sda\"\n    networkConfig:\n      interfaces:\n        - name: eno1\n          type: ethernet\n          state: up\n          mac-address: 06:00:00:00:00:11\n        - name: eno2\n          type: ethernet\n          state: up\n          mac-address: 06:00:00:00:00:12\n        - name: bond0\n          type: bond\n          state: up\n          ipv4:\n            enabled: true\n            address:\n              - ip: 10.1.0.11\n                prefix-length: 24\n            dhcp: false\n          link-aggregation:\n            mode: 802.3ad\n            port:\n              - eno1\n              - eno2\n            options:\n              miimon: '100'\n              lacp_rate: 'fast'\n              xmit_hash_policy: 'layer3+4'\n      dns-resolver:\n        config:\n          server:\n            - 10.1.0.2\n      routes:\n        config:\n          - destination: 0.0.0.0/0\n            next-hop-address: 10.1.0.1\n            next-hop-interface: bond0\n            table-id: 254\n\n  - hostname: control-plane-02\n    role: master\n    interfaces:\n      - name: eno1\n        macAddress: 06:00:00:00:00:21\n      - name: eno2\n        macAddress: 06:00:00:00:00:22\n    rootDeviceHints:\n      deviceName: \"/dev/sda\"\n    networkConfig:\n      interfaces:\n        - name: eno1\n          type: ethernet\n          state: up\n          mac-address: 06:00:00:00:00:21\n        - name: eno2\n          type: ethernet\n          state: up\n          mac-address: 06:00:00:00:00:21\n        - name: bond0\n          type: bond\n          state: up\n          ipv4:\n            enabled: true\n            address:\n              - ip: 10.1.0.12\n                prefix-length: 24\n            dhcp: false\n          link-aggregation:\n            mode: 802.3ad  # LACP - Link Aggregation Control Protocol\n            port:\n              - eno1\n              - eno2\n            options:\n              miimon: '100'\n              lacp_rate: 'fast'\n              xmit_hash_policy: 'layer3+4'\n      dns-resolver:\n        config:\n          server:\n            - 10.1.0.2\n      routes:\n        config:\n          - destination: 0.0.0.0/0\n            next-hop-address: 10.1.0.1\n            next-hop-interface: bond0\n            table-id: 254\n\n  - hostname: control-plane-03\n    role: master\n    interfaces:\n      - name: eno1\n        macAddress: 06:00:00:00:00:31\n      - name: eno2\n        macAddress: 06:00:00:00:00:32\n    rootDeviceHints:\n      deviceName: \"/dev/sda\"\n    networkConfig:\n      interfaces:\n        - name: eno1\n          type: ethernet\n          state: up\n          mac-address: 06:00:00:00:00:31\n        - name: eno2\n          type: ethernet\n          state: up\n          mac-address: 06:00:00:00:00:32\n        - name: bond0\n          type: bond\n          state: up\n          ipv4:\n            enabled: true\n            address:\n              - ip: 10.1.0.13\n                prefix-length: 24\n            dhcp: false\n          link-aggregation:\n            mode: 802.3ad\n            port:\n              - eno1\n              - eno2\n            options:\n              miimon: '100'\n              lacp_rate: 'fast'\n              xmit_hash_policy: 'layer3+4'\n      dns-resolver:\n        config:\n          server:\n            - 10.1.0.2\n      routes:\n        config:\n          - destination: 0.0.0.0/0\n            next-hop-address: 10.1.0.1\n            next-hop-interface: bond0\n            table-id: 254\n</code></pre>"}]}